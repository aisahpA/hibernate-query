CREATE SCHEMA PUBLIC
  AUTHORIZATION DBA;

CREATE MEMORY TABLE CUSTOMER (
  ID        BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1 ) NOT NULL PRIMARY KEY,
  FIRSTNAME VARCHAR(128),
  LASTNAME  VARCHAR(128),
  EMAIL     VARCHAR(128),
  PASSWORD  VARCHAR(64)
);

CREATE MEMORY TABLE ADDRESS (
  ID          BIGINT GENERATED BY DEFAULT AS IDENTITY (
  START WITH 1 )          NOT NULL
    PRIMARY KEY,
  ADDRESS1    VARCHAR(255),
  ADDRESS2    VARCHAR(255),
  CITY        VARCHAR(255),
  STATE       VARCHAR(255),
  ZIP         VARCHAR(255),
  CUSTOMER_ID BIGINT      NOT NULL,
  CONSTRAINT
    FKE66327D46DF50C34 FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMER (ID)
);

CREATE MEMORY TABLE CATEGORY (
  ID   BIGINT GENERATED BY DEFAULT AS IDENTITY (
  START WITH 1 ) NOT NULL
    PRIMARY KEY,
  NAME VARCHAR(255)
);

CREATE MEMORY TABLE ORDER_ITEM (
  ID       BIGINT GENERATED BY DEFAULT AS IDENTITY (
  START WITH 1 )             NOT NULL
    PRIMARY KEY,
  QUANTITY INTEGER,
  ORDER_ID            BIGINT NOT NULL,
  PRODUCT_ID          BIGINT NOT NULL
);

CREATE MEMORY TABLE PRODUCT (
  ID          BIGINT GENERATED BY DEFAULT AS IDENTITY (
  START WITH 1 ) NOT NULL
    PRIMARY KEY,
  NAME        VARCHAR(255),
  PRICE       DOUBLE,
  DESCRIPTION VARCHAR(255),
  INVENTORY   INTEGER
);

CREATE MEMORY TABLE PRODUCT_CATEGORIES (
  PRODUCT_ID  BIGINT NOT NULL,
  CATEGORY_ID BIGINT NOT NULL,
  PRIMARY KEY (PRODUCT_ID, CATEGORY_ID),
  CONSTRAINT FK5A93E78C121E7834 FOREIGN KEY (CATEGORY_ID)
  REFERENCES CATEGORY (ID),
  CONSTRAINT FK5A93E78CF8BBB8E0 FOREIGN KEY (PRODUCT_ID) REFERENCES
    PRODUCT (ID)
);

CREATE MEMORY TABLE ORDERS (
  ID       BIGINT GENERATED BY DEFAULT AS IDENTITY (
  START WITH 1 )        NOT NULL
    PRIMARY KEY,
  SUBTOTAL DOUBLE,
  TAX      DOUBLE,
  TOTAL    DOUBLE,
  CUSTOMER_ID    BIGINT NOT NULL,
  ADDRESS_ID     BIGINT NOT NULL,
  CONSTRAINT FK8B7256E5AE379EC0 FOREIGN KEY (ADDRESS_ID)
  REFERENCES ADDRESS (ID),
  CONSTRAINT FK8B7256E56DF50C34 FOREIGN KEY (CUSTOMER_ID)
  REFERENCES CUSTOMER (ID)
);

ALTER TABLE ORDER_ITEM
  ADD CONSTRAINT FK4BBDE984F8BBB8E0 FOREIGN KEY (PRODUCT_ID)
REFERENCES PRODUCT (ID);

ALTER TABLE ORDER_ITEM
  ADD CONSTRAINT FK4BBDE984715B5200 FOREIGN KEY (ORDER_ID)
REFERENCES ORDERS (ID);

ALTER TABLE CUSTOMER
    ALTER COLUMN ID RESTART WITH 16;

ALTER TABLE ADDRESS
    ALTER COLUMN ID RESTART WITH 1;

ALTER TABLE CATEGORY
    ALTER COLUMN ID RESTART WITH 6;

ALTER TABLE ORDER_ITEM
    ALTER COLUMN ID RESTART WITH 1;

ALTER TABLE PRODUCT
    ALTER COLUMN ID RESTART WITH 7;

ALTER TABLE ORDERS
    ALTER COLUMN ID RESTART WITH 1;

CREATE USER SA PASSWORD 'sa';

GRANT DBA TO SA;

SET WRITE_DELAY 10 MILLIS;

SET SCHEMA PUBLIC;

INSERT INTO CUSTOMER VALUES (1, 'Steven', 'Haines', 'steve@javasrc.com', 'steve');

INSERT INTO CATEGORY VALUES (1, 'Fruit');

INSERT INTO CATEGORY VALUES (2, 'Vegetables');

INSERT INTO CATEGORY VALUES (3, 'Meat');

INSERT INTO CATEGORY VALUES (4, 'Dairy');

INSERT INTO CATEGORY VALUES (5, 'Organic');

INSERT INTO PRODUCT VALUES (1, 'Apple', 0.25E0, 'Food', 10);

INSERT INTO PRODUCT VALUES (2, 'Orange', 0.5E0, 'Food', 10);

INSERT INTO PRODUCT VALUES (3, 'Banana', 0.75E0, 'Food', 0);

INSERT INTO PRODUCT VALUES (4, 'Peas', 1.5E0, 'Food', 10);

INSERT INTO PRODUCT VALUES (5, 'Carrots', 1.0E0, 'Food', 10);

INSERT INTO PRODUCT VALUES (6, 'Organic Apple', 0.75E0, 'Food', 10);

INSERT INTO PRODUCT_CATEGORIES VALUES (1, 1);

INSERT INTO PRODUCT_CATEGORIES VALUES (2, 1);

INSERT INTO PRODUCT_CATEGORIES VALUES (3, 1);

INSERT INTO PRODUCT_CATEGORIES VALUES (4, 2);

INSERT INTO PRODUCT_CATEGORIES VALUES (5, 2);

INSERT INTO PRODUCT_CATEGORIES VALUES (6, 1);

INSERT INTO PRODUCT_CATEGORIES VALUES (6, 5);